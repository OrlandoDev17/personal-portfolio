<div>
  <slot />
</div>

<script is:inline>
  document.addEventListener('DOMContentLoaded', () => {
    const elements = document.querySelectorAll('[class*="animate-"]');

    const observeElement = (entries) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          const animationClasses = [...entry.target.classList].filter((cls) =>
            cls.startsWith('animate-')
          );

          // Elimina todas las clases de animación
          entry.target.classList.remove(...animationClasses);
          void entry.target.offsetWidth; // Forzar reflow

          // Vuelve a agregarlas para reiniciar la animación
          entry.target.classList.add(...animationClasses);
        }
      });
    };

    const observer = new IntersectionObserver(observeElement, {
      root: null,
      rootMargin: '0px',
      threshold: 0.5,
    });

    elements.forEach((el) => observer.observe(el));
  });
</script>
